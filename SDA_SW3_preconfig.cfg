enable
term shell
conf t
shell processing full
end
function preconfig()
{
 HOSTNAME=`show running-config | grep hostname | cut -d ' ' -f 2`
 POD=`echo $HOSTNAME | cut -c 4`
 if [[ $POD -lt 0 || $POD -gt 4 ]]; then
   exit
 fi
 
 printf "Configuring pod $POD switch $HOSTNAME"
 conf t
 
 enable password Admin9sisko\$
 
 aaa new-model
 
 ip routing
 ip domain name sdn.lab
 
 archive
  log config
   logging enable
   notify syslog contenttype plaintext
 
 username cliadmin password 0 Admin9sisko\$
 
 interface Loopback0
  ip address 10.1"$POD".127.3 255.255.255.255
 
 interface GigabitEthernet1/0/11
  no switchport
  no shutdown
  ip address 10.1"$POD".2.3 255.255.255.0
 
 ip route 0.0.0.0 0.0.0.0 10.1"$POD".2.254
 
 snmp-server community cisco RO
 snmp-server community Admin9sisko\$ RW
 
 crypto key generate rsa modulus 2048 
 
 sleep 1
 end
 printf "\\nSuccess!"
}

